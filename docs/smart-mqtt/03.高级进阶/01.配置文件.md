---
title: 配置文件
date: 2022-12-09 17:37:22
permalink: /smart-mqtt/configure.html
---
smart-mqtt 配置文件采用的 yaml 格式，其配置结构分为两大块：Broker基础配置、插件配置。
```yaml
# Broker基础配置
broker:
  key_1: value
  key_2: value
  
# 插件配置  
plugins:
  - plugin-A:
      key_1: value
      key_2: value
  - plugin-B:
      key_4: value
      key_5: value
```
## Broker基础配置
### port
Broker 服务端口号，默认：1883
### host
Broker 服务绑定的本地 IP 地址，若为空则所有 IP 可用。

### threadNum
Broker 的服务线程数，默认等同于当前服务器的 CPU 核数。

### readBufferSize
读缓冲区大小，默认：**1024**。 每个TCP连接都会占用`readBufferSize`大小的内存空间。

合理的大小设置会带来更好的通信性能，具体参考《[缓冲区调优](/smart-mqtt/buffer-optimize.html)》。
### maxPacketSize
限制单个MQTT消息包的最大字节数，默认：1048576（1MB）

如果实际场景中的消息大小超过该默认值，可适当调大。

### maxKeepAliveTime

### pushThreadNum

### noConnectIdleTimeout

### maxInflight


### 完整示例
```yaml
broker:
  port: 1883
  threadNum: 16
  maxInflight: 8
  retryInterval: 30
  # 限制单个MQTT消息包的最大字节数。
  maxPacketSize: 1048576
  # 读缓冲区大小
  readBufferSize: 4096
  username:
  password:
  noConnectIdleTimeout: 5000
```

## 插件配置