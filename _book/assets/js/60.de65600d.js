(window.webpackJsonp=window.webpackJsonp||[]).push([[60],{416:function(t,s,e){"use strict";e.r(s);var a=e(7),n=Object(a.a)({},(function(){var t=this,s=t._self._c;return s("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[s("p",[t._v("smart-socket 自2017年开源以来，一直秉承着匠心精神，力求打造出极简、易用、高性能的国产开源通信框架。")]),t._v(" "),s("p",[t._v("然而，在网上各类未经验证的信息误导下， 大众对于Java 始终存在一些偏见。认定只有 C、C++，以及新晋之秀 Golang 才适合支撑海量连接、高流量的通信服务 。")]),t._v(" "),s("p",[t._v("事实上，用 Java 语言编写的 smart-socket 早已在性能排行榜上取得了不错的成绩（见下图）。并且，我们也终于在2022年9月23日成功验证了 smart-socket 的百万级长连接。\n"),s("img",{attrs:{src:"https://oscimg.oschina.net/oscnet/up-776fbd52374ee1f5706ad3e2c1b0bbfe053.png",alt:""}})]),t._v(" "),s("p",[t._v("在过往的项目推广中，smart-socket 从未以“百万长连接”作为宣传噱头。因为在没有经过实际验证的情况下，无法说服自己在宣传文案中出现“百万级长连接”之类不负责的字眼。况且，百万长连接的是操作系统和硬件本身便具备的能力。能做到，不代表我们的通信框架多优秀；若做不到，才当反思一下我们的项目质量。")]),t._v(" "),s("p",[t._v("而困扰我无法开展验证工作的主要原因，在于不具备硬件条件。我所用的开发电脑为 Mac Pro，先天不具备百万级长连接的测试条件（上限约26W）。")]),t._v(" "),s("p",[t._v("并且长期以来陷入某种思维误区，以为这种级别的测试必须搭配多台测试机。或者至少是一台高配服务器，再创建至少20个以上的虚拟机或容器。")]),t._v(" "),s("p",[t._v("尽管身处困境，但我还产生了一个更疯狂的想法："),s("strong",[t._v("能否用一台普通配置的服务器（4核8G）实现百万长连接。")])]),t._v(" "),s("p",[t._v("在将验证方案构思完成，并做好充分准备后，便开始在社群中寻求帮助。\n"),s("img",{attrs:{src:"https://oscimg.oschina.net/oscnet/up-8e50def7029715671a63375502948858a27.png",alt:""}})]),t._v(" "),s("p",[t._v("很快便得到了响应和支持，在次特别感谢这位老朋友。\n"),s("img",{attrs:{src:"https://oscimg.oschina.net/oscnet/up-2c02d37e99eb834ced4af2be4c31b70df07.png",alt:""}})]),t._v(" "),s("p",[t._v("最终，我们顺利的完成了百万级长连接的测试。\n"),s("img",{attrs:{src:"https://oscimg.oschina.net/oscnet/up-ee0b3dd500e3dccab9e3d726247bb48d258.png",alt:""}})]),t._v(" "),s("p",[t._v("当 TCP 总连接数定格在101万的时候，服务端仅消耗内存 3.1G（PS：最新测试数据为1.1G内存开销），每个客户端维持在 120~170MB 左右。\n"),s("img",{attrs:{src:"https://oscimg.oschina.net/oscnet/up-f09fc9da7f4651d923939801b8e10826dfd.png",alt:""}})]),t._v(" "),s("h2",{attrs:{id:"实战百万长连接"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#实战百万长连接"}},[t._v("#")]),t._v(" 实战百万长连接")]),t._v(" "),s("p",[s("strong",[s("a",{attrs:{href:"https://mp.weixin.qq.com/s/l_IBSBI6SAY4FmomwLFa-Q",target:"_blank",rel:"noopener noreferrer"}},[t._v("前往阅读剩余付费内容..."),s("OutboundLink")],1)])]),t._v(" "),s("p",[t._v("假如一切顺利的话，你应该可以亲眼见证百万连接。倘若过程中遇到问题，欢迎反馈交流。")])])}),[],!1,null,null,null);s.default=n.exports}}]);