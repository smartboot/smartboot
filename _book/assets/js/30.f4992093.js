(window.webpackJsonp=window.webpackJsonp||[]).push([[30],{375:function(t,s,a){"use strict";a.r(s);var e=a(7),n=Object(e.a)({},(function(){var t=this,s=t._self._c;return s("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[s("p",[t._v("如果你手头正好有一套 Docker 环境，那会是一件非常美好的事。因为，你只需要通过一两个操作指令，便能搭建出 smart-mqtt broker 服务。")]),t._v(" "),s("blockquote",[s("p",[t._v("镜像地址："),s("a",{attrs:{href:"https://hub.docker.com/r/smartboot/smart-mqtt",target:"_blank",rel:"noopener noreferrer"}},[t._v("https://hub.docker.com/r/smartboot/smart-mqtt"),s("OutboundLink")],1)])]),t._v(" "),s("p",[t._v("下面提供两种方式用于启动 smart-mqtt 的 docker 容器：")]),t._v(" "),s("h2",{attrs:{id:"方式一-docker-run"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#方式一-docker-run"}},[t._v("#")]),t._v(" 方式一：docker run")]),t._v(" "),s("div",{staticClass:"language-shell line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[t._v("docker")]),t._v(" run "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-d")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("--name")]),t._v(" smart-mqtt "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-p")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1883")]),t._v(":1883 smartboot/smart-mqtt:latest\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br")])]),s("p",[t._v("搞定！！！没错，就是这么简单。")]),t._v(" "),s("p",[t._v("当然，你也可以执行"),s("code",[t._v("docker ps")]),t._v("确认下服务是否正常启动。")]),t._v(" "),s("p",[t._v("如果失败了，建议检查下宿主机的端口是否已被占用。")]),t._v(" "),s("h2",{attrs:{id:"方式二-docker-compose-推荐"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#方式二-docker-compose-推荐"}},[t._v("#")]),t._v(" 方式二：docker compose(推荐)")]),t._v(" "),s("p",[t._v("虽然方式一只需一行命令就完成 smart-mqtt 的启动，但个人更推荐使用"),s("code",[t._v("docker compose")]),t._v("。具体步骤如下：")]),t._v(" "),s("ol",[s("li",[t._v("找一个你认为风水比较好的目录，新建文件："),s("code",[t._v("docker-compose.yml")]),t._v("，复制粘贴以下内容并保存。"),s("div",{staticClass:"language-yaml line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-yaml"}},[s("code",[s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("services")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("smart-mqtt")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("container_name")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" smart"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("mqtt\n    "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("hostname")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" smart"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("mqtt\n    "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("image")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" smartboot/smart"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("mqtt"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("latest\n    "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("ports")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" 1883"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("1883/tcp\n    "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("read_only")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token boolean important"}},[t._v("true")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("restart")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" always\n    "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("security_opt")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" no"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("new"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("privileges"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),s("span",{pre:!0,attrs:{class:"token boolean important"}},[t._v("true")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("user")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" root"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("root\n    "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("logging")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("driver")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"json-file"')]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("options")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("max-size")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"100m"')]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("max-file")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"1"')]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("version")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'3.7'")]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br"),s("span",{staticClass:"line-number"},[t._v("5")]),s("br"),s("span",{staticClass:"line-number"},[t._v("6")]),s("br"),s("span",{staticClass:"line-number"},[t._v("7")]),s("br"),s("span",{staticClass:"line-number"},[t._v("8")]),s("br"),s("span",{staticClass:"line-number"},[t._v("9")]),s("br"),s("span",{staticClass:"line-number"},[t._v("10")]),s("br"),s("span",{staticClass:"line-number"},[t._v("11")]),s("br"),s("span",{staticClass:"line-number"},[t._v("12")]),s("br"),s("span",{staticClass:"line-number"},[t._v("13")]),s("br"),s("span",{staticClass:"line-number"},[t._v("14")]),s("br"),s("span",{staticClass:"line-number"},[t._v("15")]),s("br"),s("span",{staticClass:"line-number"},[t._v("16")]),s("br"),s("span",{staticClass:"line-number"},[t._v("17")]),s("br"),s("span",{staticClass:"line-number"},[t._v("18")]),s("br")])])]),t._v(" "),s("li",[t._v("在"),s("code",[t._v("docker-compose.yml")]),t._v("文件所在目录下执行命令："),s("code",[t._v("docker compose up -d")]),t._v("（有些环境或许是"),s("code",[t._v("docker-compose up -d")]),t._v("）。如果一切顺利的话，稍等片刻 smart-mqtt 便会完成启动。"),s("br"),t._v("\n假如需要停止服务，只需执行"),s("code",[t._v("docker compose stop")]),t._v("。"),s("br"),t._v("\n若要移除容器，可以执行"),s("code",[t._v("docker compose down")]),t._v("。"),s("br"),t._v("\n这些操作形式比 "),s("code",[t._v("docker stop")]),t._v(" 、"),s("code",[t._v("docker rm")]),t._v(" 方便很多，这也是推荐使用 "),s("code",[t._v("docker compose")]),t._v(" 管理服务的主要原因。")])])])}),[],!1,null,null,null);s.default=n.exports}}]);