(window.webpackJsonp=window.webpackJsonp||[]).push([[30],{393:function(t,a,s){"use strict";s.r(a);var e=s(7),r=Object(e.a)({},(function(){var t=this,a=t._self._c;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("p",[t._v("为了提供兼具可读性和可维护性的配置体验，smart-mqtt 采用 yml 格式管理自身配置，其主体结构分为两大块：Broker基础配置、插件配置。")]),t._v(" "),a("div",{staticClass:"language-yaml line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-yaml"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# Broker基础配置")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("broker")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("key_1")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" value\n  "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("key_2")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" value\n  \n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 插件配置  ")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("plugins")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("plugin-A")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("key_1")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" value\n      "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("key_2")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" value\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("plugin-B")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("key_4")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" value\n      "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("key_5")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" value\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br"),a("span",{staticClass:"line-number"},[t._v("4")]),a("br"),a("span",{staticClass:"line-number"},[t._v("5")]),a("br"),a("span",{staticClass:"line-number"},[t._v("6")]),a("br"),a("span",{staticClass:"line-number"},[t._v("7")]),a("br"),a("span",{staticClass:"line-number"},[t._v("8")]),a("br"),a("span",{staticClass:"line-number"},[t._v("9")]),a("br"),a("span",{staticClass:"line-number"},[t._v("10")]),a("br"),a("span",{staticClass:"line-number"},[t._v("11")]),a("br"),a("span",{staticClass:"line-number"},[t._v("12")]),a("br"),a("span",{staticClass:"line-number"},[t._v("13")]),a("br")])]),a("h2",{attrs:{id:"broker基础配置"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#broker基础配置"}},[t._v("#")]),t._v(" Broker基础配置")]),t._v(" "),a("h3",{attrs:{id:"port"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#port"}},[t._v("#")]),t._v(" port")]),t._v(" "),a("p",[t._v("Broker 服务端口号，默认："),a("strong",[t._v("1883")])]),t._v(" "),a("h3",{attrs:{id:"host"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#host"}},[t._v("#")]),t._v(" host")]),t._v(" "),a("p",[t._v("Broker 服务绑定的本地 IP 地址，若为空则所有 IP 可用。")]),t._v(" "),a("h3",{attrs:{id:"threadnum"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#threadnum"}},[t._v("#")]),t._v(" threadNum")]),t._v(" "),a("p",[t._v("Broker 的服务线程数，默认等同于当前服务器的 CPU 核数。")]),t._v(" "),a("h3",{attrs:{id:"pushthreadnum"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#pushthreadnum"}},[t._v("#")]),t._v(" pushThreadNum")]),t._v(" "),a("p",[t._v("消息推送服务的线程数，默认等同于当前服务器的 CPU 核数。")]),t._v(" "),a("h3",{attrs:{id:"buffersize"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#buffersize"}},[t._v("#")]),t._v(" bufferSize")]),t._v(" "),a("p",[t._v("IO缓冲区大小，默认："),a("strong",[t._v("4096")]),t._v("。")]),t._v(" "),a("p",[t._v("合理的大小设置会带来更好的通信性能，具体参考《"),a("RouterLink",{attrs:{to:"/smart-mqtt/buffer-optimize.html"}},[t._v("缓冲区调优")]),t._v("》。")],1),t._v(" "),a("h3",{attrs:{id:"maxpacketsize"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#maxpacketsize"}},[t._v("#")]),t._v(" maxPacketSize")]),t._v(" "),a("p",[t._v("限制单个MQTT消息包的最大字节数，默认："),a("strong",[t._v("1048576")]),t._v("（1MB）")]),t._v(" "),a("p",[t._v("如果实际场景中的消息大小超过该默认值，可适当调大。")]),t._v(" "),a("h3",{attrs:{id:"topiclimit"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#topiclimit"}},[t._v("#")]),t._v(" topicLimit")]),t._v(" "),a("p",[t._v("Broker支持的Topic数量上限，默认：1024.")]),t._v(" "),a("h3",{attrs:{id:"maxkeepalivetime"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#maxkeepalivetime"}},[t._v("#")]),t._v(" maxKeepAliveTime")]),t._v(" "),a("p",[t._v("客户端支持的最长"),a("code",[t._v("keep-alive")]),t._v("时长。")]),t._v(" "),a("p",[t._v("当发送的"),a("code",[t._v("Connect")]),t._v("中夹带的keepAlive时长超过改值时，将以"),a("code",[t._v("maxKeepAliveTime")]),t._v("为准。")]),t._v(" "),a("h3",{attrs:{id:"noconnectidletimeout"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#noconnectidletimeout"}},[t._v("#")]),t._v(" noConnectIdleTimeout")]),t._v(" "),a("p",[t._v("网络连接建立后，如果服务端在合理的时间内没有收到 CONNECT 报文，服务端应该关闭这个连接。")]),t._v(" "),a("p",[t._v("单位："),a("strong",[t._v("毫秒")]),t._v("，默认："),a("strong",[t._v("5000")]),t._v("。")]),t._v(" "),a("h3",{attrs:{id:"maxinflight"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#maxinflight"}},[t._v("#")]),t._v(" maxInflight")]),t._v(" "),a("p",[t._v("在完成应答前，同时投递的 QoS 1 和 QoS 2 消息的最大数量。")]),t._v(" "),a("h3",{attrs:{id:"完整示例"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#完整示例"}},[t._v("#")]),t._v(" 完整示例")]),t._v(" "),a("div",{staticClass:"language-yaml line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-yaml"}},[a("code",[a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("broker")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("port")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1883")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("host")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" 0.0.0.0\n  "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("threadNum")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("16")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("maxInflight")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("8")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("maxPacketSize")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("4096")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("noConnectIdleTimeout")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("5000")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br"),a("span",{staticClass:"line-number"},[t._v("4")]),a("br"),a("span",{staticClass:"line-number"},[t._v("5")]),a("br"),a("span",{staticClass:"line-number"},[t._v("6")]),a("br"),a("span",{staticClass:"line-number"},[t._v("7")]),a("br")])]),a("h2",{attrs:{id:"开源插件配置"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#开源插件配置"}},[t._v("#")]),t._v(" 开源插件配置")]),t._v(" "),a("p",[t._v("暂无")])])}),[],!1,null,null,null);a.default=r.exports}}]);